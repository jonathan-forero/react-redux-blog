(this["webpackJsonpplatzi-blog"]=this["webpackJsonpplatzi-blog"]||[]).push([[0],{44:function(e,t,a){e.exports=a(76)},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getAll",(function(){return g}));var r={};a.r(r),a.d(r,"getAll",(function(){return H})),a.d(r,"changeUserId",(function(){return V})),a.d(r,"changeTitle",(function(){return z})),a.d(r,"saveTask",(function(){return J})),a.d(r,"editTask",(function(){return q})),a.d(r,"changeChekbox",(function(){return Q})),a.d(r,"deleteTask",(function(){return W})),a.d(r,"cleanForm",(function(){return X}));var c=a(0),s=a.n(c),o=a(23),l=a.n(o),u=(a(49),a(50),a(51),a(11)),i=a(20),p=function(){return s.a.createElement("nav",{id:"menu"},s.a.createElement(u.b,{to:"/react-redux-blog/users"},"Users"),s.a.createElement(u.b,{to:"/react-redux-blog/tasks"},"Tasks"))},d=a(6),m=a(3),h=a.n(m),E=a(9),f=a(12),b=a.n(f),v="USERS_GET_ALL",y="USERS_ERROR",g=function(){return function(){var e=Object(E.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"USERS_LOADING"}),e.prev=1,e.next=4,b.a.get("https://jsonplaceholder.typicode.com/users");case 4:a=e.sent,t({type:v,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:y,payload:e.t0.message+" - User info not available"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},O=a(15),k=a(16),j=a(18),S=a(17),R=a(19),T=(a(75),function(){return s.a.createElement("div",{className:"spinner-container"},s.a.createElement("div",{className:"lds-spinner"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null)))}),A=function(e){return s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",{className:"red"},"Something went wrong, please try later."),e.message)},x=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Email"),s.a.createElement("th",null,"Link"))),s.a.createElement("tbody",null,e.users.map((function(e,t){return s.a.createElement("tr",{key:e.id},s.a.createElement("td",null,e.name),s.a.createElement("td",null,e.email),s.a.createElement("td",null,e.website),s.a.createElement("td",null,s.a.createElement(u.b,{to:"/react-redux-blog/posts/".concat(t)},s.a.createElement("div",{className:"eye-solid icon"}))))})))))},_=Object(d.b)((function(e){return e.usersReducer}))(x),C=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(j.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).setContent=function(){return a.props.error?s.a.createElement(A,{message:a.props.error}):a.props.loading?s.a.createElement(T,null):s.a.createElement(_,null)},a}return Object(R.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.users.length||this.props.getAll()}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Users"),this.setContent())}}]),t}(s.a.Component),N=Object(d.b)((function(e){return e.usersReducer}),n)(C),I=function(e){return e.errorComments?s.a.createElement(A,{message:e.errorComments}):e.loadingComments&&!e.comments.length?s.a.createElement(T,null):s.a.createElement("div",null,s.a.createElement("ul",{className:"comments"},e.comments.map((function(e){return s.a.createElement("li",{key:e.id},s.a.createElement("b",null,s.a.createElement("u",null,e.email)),s.a.createElement("br",null),e.body)}))))},w=Object(d.b)((function(e){return e.postsReducer}),{})(I),D=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(j.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).setUser=function(){var e=a.props,t=e.usersReducer,n=e.match.params.key,r=t.users.length?t.users[n].name:null;return t.error?s.a.createElement(A,{message:t.error}):t.loading?s.a.createElement(T,null):s.a.createElement("h1",{className:"text-center"},"Posts from ",r)},a.setPosts=function(){var e=a.props,t=e.usersReducer.users,n=e.postsReducer,r=e.postsReducer.posts,c=e.match.params.key;return n.error?s.a.createElement(A,{message:n.error}):n.loading?s.a.createElement(T,null):r.length&&"posts_key"in t[c]?a.showInfo(r[t[c].posts_key],t[c].posts_key):null},a.showInfo=function(e,t){return e.map((function(e,n){return s.a.createElement("div",{className:"post_title",key:e.id,onClick:function(){return a.showComments(t,n,e.comments)}},s.a.createElement("h2",null,e.title),s.a.createElement("p",null,e.body),e.open?s.a.createElement(w,{comments:e.comments}):"")}))},a.showComments=function(e,t,n){a.props.openClose(e,t),n.length||a.props.getComments(e,t)},a}return Object(R.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.getAllUsers,n=t.getPostsByUser,r=t.match.params.key,this.props.usersReducer.users.length){e.next=4;break}return e.next=4,a();case 4:if(!this.props.usersReducer.error){e.next=6;break}return e.abrupt("return");case 6:"posts_key"in this.props.usersReducer.users[r]||n(r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.setUser(),this.setPosts())}}]),t}(c.Component),U=a(30),L=a(1),G="POSTS_UPDATE",K={getAllUsers:g,getPostsByUser:function(e){return function(){var t=Object(E.a)(h.a.mark((function t(a,n){var r,c,s,o,l,u,i,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"POSTS_LOADING"}),r=n().usersReducer.users,c=n().postsReducer.posts,s=r[e].id,t.prev=4,t.next=7,b.a.get("https://jsonplaceholder.typicode.com/posts?userId=".concat(s));case 7:o=t.sent,l=o.data.map((function(e){return Object(L.a)({},e,{comments:[],open:!1})})),u=[].concat(Object(U.a)(c),[l]),a({type:G,payload:u}),i=u.length-1,(p=Object(U.a)(r))[e]=Object(L.a)({},r[e],{posts_key:i}),a({type:v,payload:p}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(4),a({type:"POSTS_ERROR",payload:t.t0.message+" posts not available"});case 20:case"end":return t.stop()}}),t,null,[[4,17]])})));return function(e,a){return t.apply(this,arguments)}}()},openClose:function(e,t){return function(a,n){var r=n().postsReducer.posts,c=r[e][t],s=Object(L.a)({},c,{open:!c.open});r[e][t]=s;try{a({type:G,payload:r})}catch(o){a({type:"POSTS_ERROR",payload:o.message})}}},getComments:function(e,t){return function(){var a=Object(E.a)(h.a.mark((function a(n,r){var c,s,o,l;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"COMMENTS_LOADING"}),c=r().postsReducer.posts,s=c[e][t],a.prev=3,a.next=6,b.a.get("https://jsonplaceholder.typicode.com/comments?postId=".concat(s.id));case 6:o=a.sent,l=Object(L.a)({},s,{comments:o.data}),c[e][t]=l,n({type:"UPDATE_COMMENTS",payload:c}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(3),n({type:"COMMENTS_ERROR",payload:a.t0.message+" comments not available"});case 15:case"end":return a.stop()}}),a,null,[[3,12]])})));return function(e,t){return a.apply(this,arguments)}}()}},M=Object(d.b)((function(e){return{usersReducer:e.usersReducer,postsReducer:e.postsReducer}}),K)(D),P=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(j.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).showContent=function(){var e=a.props,t=e.tasks,n=e.loading,r=e.error;return n?s.a.createElement(T,null):r?s.a.createElement(A,{message:r}):Object.keys(t).map((function(e){return s.a.createElement("div",{key:e},s.a.createElement("h2",null,"User ",e),s.a.createElement("div",{className:"tasks-container"},a.setTasks(e)))}))},a.setTasks=function(e){var t=a.props,n=t.tasks,r=t.changeChekbox,c=t.deleteTask,o=Object(L.a)({},n[e]);return Object.keys(o).map((function(t){return s.a.createElement("div",{className:"grid"},s.a.createElement("div",{className:"row task-row",key:t},s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",defaultChecked:o[t].completed,onChange:function(){return r(e,t)}})),s.a.createElement("div",{className:"col-6"},o[t].title),s.a.createElement("div",{className:"col-1"},s.a.createElement(u.b,{to:"/react-redux-blog/tasks/save/".concat(e,"/").concat(t)},s.a.createElement("div",{className:"edit-solid icon",title:"Edit"}))),s.a.createElement("div",{className:"col-1"},s.a.createElement("div",{className:"trash-solid icon m_left",onClick:function(){return c(t)},title:"Delete"}))))}))},a}return Object(R.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){Object.keys(this.props.tasks).length||this.props.getAll()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.tasks,a=e.loading,n=e.getAll;Object.keys(t).length||a||n()}},{key:"render",value:function(){return s.a.createElement("div",{className:"flex-column"},s.a.createElement(u.b,{to:"/react-redux-blog/tasks/save"},s.a.createElement("div",{class:"card-solid icon",title:"Add"})),this.showContent())}}]),t}(c.Component),B=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(j.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){var e=a.props,t=e.match.params,n=t.userId,r=t.taskId,c=e.tasks,s=e.changeUserId,o=e.changeTitle,l=e.cleanForm;if(n&&r){var u=c[n][r];s(n),o(u.title)}else l()},a.changeUserId=function(e){a.props.changeUserId(e.target.value)},a.changeTitle=function(e){a.props.changeTitle(e.target.value)},a.save=function(){var e=a.props,t=e.match.params,n=t.userId,r=t.taskId,c=e.tasks,s=e.title,o=e.saveTask,l=e.editTask,u={userId:n,title:s,completed:!1};if(n&&r){var i=c[n][r];l(Object(L.a)({},u,{completed:i.completed,id:r}))}else o(u)},a.disable=function(){var e=a.props,t=e.userId,n=e.title;return!!e.loading||(!t||!n)},a.showAction=function(){var e=a.props,t=e.error;return e.loading?s.a.createElement(T,null):t?s.a.createElement(A,{message:t}):null},a}return Object(R.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props.goBack;return s.a.createElement("div",{className:"save-tasks"},e?s.a.createElement(i.a,{to:"/react-redux-blog/tasks"}):null,s.a.createElement("h1",null,"Save Task"),"User id:",s.a.createElement("input",{type:"number",value:this.props.userId,onChange:this.changeUserId}),s.a.createElement("br",null),s.a.createElement("br",null),"Title:",s.a.createElement("input",{type:"text",value:this.props.title,onChange:this.changeTitle}),s.a.createElement("br",null),s.a.createElement("br",null),!this.disable()&&s.a.createElement("div",{class:"tv-solid icon",onClick:this.save,disabled:this.disable(),title:"Save"}),this.showAction())}}]),t}(c.Component),F=a(25),H=function(){return function(){var e=Object(E.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"TASKS_LOADING"}),e.prev=1,e.next=4,b.a.get("https://jsonplaceholder.typicode.com/todos");case 4:a=e.sent,n={},a.data.map((function(e){return n[e.userId]=Object(L.a)({},n[e.userId],Object(F.a)({},e.id,Object(L.a)({},e)))})),t({type:"TASKS_GET_ALL",payload:n}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t({type:"TASKS_ERROR",payload:e.t0.message+" - Tasks info not available"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},V=function(e){return function(t){t({type:"CHANGE_USER_ID",payload:e})}},z=function(e){return function(t){t({type:"CHANGE_TITLE",payload:e})}},J=function(e){return function(){var t=Object(E.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"TASKS_LOADING"}),t.prev=1,t.next=4,b.a.post("https://jsonplaceholder.typicode.com/todos",e);case 4:a({type:"TASK_SAVED"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"TASKS_ERROR",payload:t.t0.message+" - Save Task Fail, please try later"});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(E.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"TASKS_LOADING"}),t.prev=1,t.next=4,b.a.put("https://jsonplaceholder.typicode.com/todos/".concat(e.id),e);case 4:a({type:"TASK_SAVED"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"TASKS_ERROR",payload:t.t0.message+" - Save Task Fail, please try later"});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},Q=function(e,t){return function(a,n){var r=n().tasksReducer.tasks,c=r[e][t],s=Object(L.a)({},r);s[e]=Object(L.a)({},r[e]),s[e][t]=Object(L.a)({},r[e][t],{completed:!c.completed}),a({type:"UPDATE",payload:s})}},W=function(e){return function(){var t=Object(E.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"TASKS_LOADING"}),t.prev=1,t.next=4,b.a.delete("https://jsonplaceholder.typicode.com/todos/".concat(e));case 4:a({type:"TASKS_GET_ALL",payload:{}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"TASKS_ERROR",payload:t.t0.message+" - Delete Task Fail, please try later"});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},X=function(){return function(e){e({type:"CLEAN"})}},Y=function(e){return e.tasksReducer},Z=Object(d.b)(Y,r)(P),$=Object(d.b)(Y,r)(B),ee=function(){return s.a.createElement(u.a,null,s.a.createElement(p,null),s.a.createElement("div",{className:"margin"},s.a.createElement(i.b,{exact:!0,path:"/",component:N}),s.a.createElement(i.b,{exact:!0,path:"/react-redux-blog",component:N}),s.a.createElement(i.b,{exact:!0,path:"/react-redux-blog/users",component:N}),s.a.createElement(i.b,{exact:!0,path:"/react-redux-blog/tasks",component:Z}),s.a.createElement(i.b,{exact:!0,path:"/react-redux-blog/posts/:key",component:M}),s.a.createElement(i.b,{exact:!0,path:"/react-redux-blog/tasks/save",component:$}),s.a.createElement(i.b,{exact:!0,path:"/react-redux-blog/tasks/save/:userId/:taskId",component:$})))},te=a(21),ae=a(43),ne={users:[],loading:!1,error:""},re={posts:[],loading:!1,error:"",loadingComments:!1,errorComments:""},ce={tasks:{},loading:!1,error:"",userId:"",title:"",goBack:!1},se=Object(te.c)({usersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(L.a)({},e,{users:t.payload,loading:!1,error:""});case"USERS_LOADING":return Object(L.a)({},e,{loading:!0});case y:return Object(L.a)({},e,{error:t.payload,loading:!1});default:return e}},postsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(L.a)({},e,{posts:t.payload,loading:!1,error:""});case"POSTS_ERROR":return Object(L.a)({},e,{error:t.payload,loading:!1});case"POSTS_LOADING":return Object(L.a)({},e,{loading:!0});case"COMMENTS_ERROR":return Object(L.a)({},e,{errorComments:t.payload,loadingComments:!1});case"COMMENTS_LOADING":return Object(L.a)({},e,{loadingComments:!0});case"UPDATE_COMMENTS":return Object(L.a)({},e,{posts:t.payload,loadingComments:!1,errorComments:""});default:return e}},tasksReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TASKS_GET_ALL":return Object(L.a)({},e,{tasks:t.payload,loading:!1,error:"",goBack:!1});case"TASKS_LOADING":return Object(L.a)({},e,{loading:!0});case"TASKS_ERROR":return Object(L.a)({},e,{error:t.payload,loading:!1});case"CHANGE_USER_ID":return Object(L.a)({},e,{userId:t.payload});case"CHANGE_TITLE":return Object(L.a)({},e,{title:t.payload});case"TASK_SAVED":return Object(L.a)({},e,{loading:!1,tasks:{},error:"",goBack:!0,userId:"",title:""});case"UPDATE":return Object(L.a)({},e,{tasks:t.payload});case"CLEAN":return Object(L.a)({},e,{userId:"",title:""});default:return e}}}),oe=Object(te.d)(se,{},Object(te.a)(ae.a));l.a.render(s.a.createElement(d.a,{store:oe},s.a.createElement(ee,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.d739b521.chunk.js.map